import 'package:flutter/material.dart';
import 'package:flutter/rendering.dart';
import 'package:places/pages/detail_page.dart';
import 'package:places/widgets/customs/left_aligned_list_view/left_aligned_scroll_physics.dart';
import 'package:places/widgets/layouts/list/card_list/card_view.dart';

class CardList extends StatelessWidget {
  final List<Widget> children;
  final double itemExtent;
  final double laneMargin;
  final double edgeMargin;

  const CardList({
    Key key,
    @required this.children,
    @required this.itemExtent,
    this.laneMargin,
    this.edgeMargin,
  }) : super(key: key);

  @override
  Widget build(BuildContext context) {
    final physics = LeftAlignedScrollPhysics(
      itemExtent: itemExtent,
      margin: laneMargin,
    );

    return ListView(
      scrollDirection: Axis.horizontal,
      physics: physics,
      children: children.map((img) {
        int _index = children.indexOf(img);
        double _laneMargin = laneMargin ?? 20;
        double _edgeMargin = (edgeMargin ?? _laneMargin);

        EdgeInsets _mpad = EdgeInsets.zero;
        if (_index == 0) {
          _mpad = EdgeInsets.only(left: _edgeMargin / 2);
        }
        if (_index == children.length - 1) {
          _mpad = EdgeInsets.only(right: _edgeMargin / 2);
        }
        return Padding(
          padding: _mpad,
          child: Padding(
            padding: EdgeInsets.symmetric(horizontal: _laneMargin / 2),
            child: GestureDetector(
              onTap: () {
                Navigator.of(context).pushNamed(
                  DetailPage.routeName,
                  arguments: _index,
                );
              },
              child: CardView(
                img: img,
                itemExtent: itemExtent,
              ),
            ),
          ),
        );
      }).toList(),
    );
  }
}
